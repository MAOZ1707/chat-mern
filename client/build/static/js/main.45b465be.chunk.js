(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{155:function(e,t,a){},156:function(e,t,a){},188:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(8),r=a.n(c),i=(a(188),a(5)),o=a.n(i),u=a(7),l=a(4),d=a(22),j=a.n(d),m=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!1),r=Object(l.a)(c,2),i=r[0],d=r[1];return{error:a,isLoading:i,sendRequest:Object(n.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,c,r,i,u=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:"GET",n=u.length>2&&void 0!==u[2]?u[2]:null,c=u.length>3&&void 0!==u[3]?u[3]:{},d(!0),e.prev=4,e.next=7,j()({url:t,method:a,data:n,headers:c});case 7:return r=e.sent,i=r,d(!1),e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(4),s(e.t0.response.data.message),d(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),[])}},h=a(1),b=s.a.createContext();function p(){return Object(n.useContext)(b)}function O(e){var t=e.children,a=m().sendRequest,s=Object(n.useState)([]),c=Object(l.a)(s,2),r=c[0],i=c[1],d=Object(n.useState)([]),p=Object(l.a)(d,2),O=p[0],f=p[1];function x(){return(x=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat("https://chat-message-application.herokuapp.com","/users"));case 2:return t=e.sent,e.next=5,t.data.users;case 5:a=e.sent,i(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=Object(n.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("".concat("https://chat-message-application.herokuapp.com","/users/").concat(t,"/friends"),"GET");case 3:n=e.sent,s=n.data,f(s.friends),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),v={loadUsers:function(){return x.apply(this,arguments)},setUserFriends:f,loadUserFriends:_,users:r,userFriends:O};return Object(h.jsx)(b.Provider,{value:v,children:t})}var f=s.a.createContext();function x(){return Object(n.useContext)(f)}function _(e){var t=e.children,a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],r=s[1],i=Object(n.useState)(null),d=Object(l.a)(i,2),m=d[0],b=d[1],p=Object(n.useState)(null),O=Object(l.a)(p,2),x=O[0],_=O[1],v=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat("https://chat-message-application.herokuapp.com","/rooms/user/").concat(t));case 2:return a=e.sent,e.next=5,a.data.userRooms;case 5:n=e.sent,r(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){m&&g(m._id)}),[m]);var g=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat("https://chat-message-application.herokuapp.com","/rooms/room/").concat(t,"/users"));case 2:return a=e.sent,e.next=5,a.data;case 5:n=e.sent,s=n.roomUsers,_(s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={loadRooms:v,chooseRoom:Object(n.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat("https://chat-message-application.herokuapp.com","/rooms/").concat(t));case 2:return a=e.sent,e.next=5,a.data.room;case 5:n=e.sent,b(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),selectedRoom:m,setSelectedRoom:b,setRooms:r,rooms:c,roomUsers:x};return Object(h.jsx)(f.Provider,{value:k,children:t})}var v=s.a.createContext();function g(){return Object(n.useContext)(v)}function k(e){var t=e.children,a=Object(n.useState)((function(){var e=localStorage.getItem("user-Theme");if(null!=e)return JSON.parse(e)})),s=Object(l.a)(a,2),c={selectTheme:s[0],setSelectTheme:s[1]};return Object(h.jsx)(v.Provider,{value:c,children:t})}var N=s.a.createContext();function C(){return Object(n.useContext)(N)}function w(e){var t=e.children,a=Object(n.useState)(null),s=Object(l.a)(a,2),c=s[0],r=s[1],i=Object(n.useState)(),d=Object(l.a)(i,2),m=d[0],b=d[1],p={saveMessage:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.prev=1,e.next=4,j()({url:"".concat("https://chat-message-application.herokuapp.com","/messages/save"),method:"POST",data:{messages:t.text,sender:t.name,time:t.time,conversationId:t.roomId},headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),getRoomMessages:Object(n.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.prev=1,e.next=4,j()({url:"".concat("https://chat-message-application.herokuapp.com","/messages/room/").concat(t),method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 4:a=e.sent,r(a.data.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),conversationMsgs:c,setLastMessage:b,lastMessage:m};return Object(h.jsx)(N.Provider,{value:p,children:t})}var S=a(157),y=a.n(S),T=s.a.createContext();function R(){return Object(n.useContext)(T)}function E(e){e.id;var t=e.children,a=Object(n.useState)(),s=Object(l.a)(a,2),c=s[0],r=s[1],i=Object(n.useState)([]),o=Object(l.a)(i,2),u=o[0],d=o[1],j="https://server-socket-v2.herokuapp.com/";Object(n.useEffect)((function(){var e=y()(j);return r(e),function(){return e.close()}}),[j]);var m={socket:c,chatUsers:u,setChatUsers:d};return Object(h.jsx)(T.Provider,{value:m,children:t})}var F=s.a.createContext();function I(){return Object(n.useContext)(F)}function M(e){var t=e.children,a=Object(n.useState)(null),s=Object(l.a)(a,2),c=s[0],r=s[1],i=Object(n.useState)(null),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(n.useState)(null),m=Object(l.a)(j,2),b=m[0],p=m[1],O=Object(n.useCallback)((function(e,t,a){d(t),r(e),p(a),localStorage.setItem("chat-user",JSON.stringify({username:a,userId:e,token:t}))}),[]);Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("chat-user"));e&&e.token&&O(e.userId,e.token,e.username)}),[O]);var f=Object(n.useCallback)((function(){d(null),r(null),p(null),localStorage.removeItem("chat-user")}),[]),x={login:O,logout:f,userId:c,token:u,username:b};return Object(h.jsx)(F.Provider,{value:x,children:t})}var q=a(47),B=a(17),U=a(41),L=a.n(U),P=a(158),A=a.n(P),H=a(164),J=a.n(H),V=a(159),D=a.n(V),G=(a(97),function(e){var t=e.content,a=e.send,s=m(),c=(s.error,s.isLoading,s.sendRequest),r=Object(n.useState)(t.favorite),i=Object(l.a)(r,2),d=i[0],j=i[1],b=function(){var e=Object(u.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("".concat("https://chat-message-application.herokuapp.com","/messages/").concat(t._id,"/favorite"),"PATCH",{favorite:!d});case 2:a=e.sent,n=a.data.message,200===a.status&&j(n.favorite);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("p",{className:"chat__message ".concat(t.name!==a?"chat__receiver":null," "),children:[Object(h.jsx)("span",{className:"chat__favorite",onClick:b,children:d?Object(h.jsx)(D.a,{}):Object(h.jsx)(J.a,{})}),Object(h.jsx)("span",{className:"chat__name",children:t.name}),t&&t.text,Object(h.jsx)("span",{className:"chat__timestamp",children:t&&t.time||L()(t.time).format("HH:mm a")})]})}),Y=a(179),K=function(e){var t=e.messageList,a=e.send,n=e.search,c=g().selectTheme,r=t.filter((function(e){return e.text.includes(n)}));return Object(h.jsx)(Y.a,{className:"messages",children:Object(h.jsx)("div",{className:"chat__body",style:{backgroundImage:"url(".concat(c,")")},children:t&&r.map((function(e,t){return Object(h.jsx)(s.a.Fragment,{children:Object(h.jsx)(G,{content:e,send:a})},t)}))})})},z=a(396),Q=a(385),W=a(389),X=a(390),Z=a(394),$=a(395),ee=a(386),te=a.p+"static/media/b1.94f72df0.png",ae=a.p+"static/media/b2.f14b0540.png",ne=a.p+"static/media/b3.c628fb90.jpg",se=a.p+"static/media/b4.55419359.jpg",ce=a.p+"static/media/b5.88a1f5d7.jpg",re=a.p+"static/media/b6.963b514f.jpg",ie=a.p+"static/media/b7.f29700da.jpg",oe=a.p+"static/media/b8.dd81d324.jpg",ue=(a(243),function(){var e=g().setSelectTheme,t=[te,ae,ne,se,ce,re,ie,oe];return Object(h.jsx)("div",{className:"background__grid",children:t.map((function(t,a){return Object(h.jsx)("div",{onClick:function(){return function(t){e(t)}(t)},className:"img__container b_".concat(a+1),children:Object(h.jsx)("img",{id:a,src:t,alt:"b_".concat(a+1),className:"img__background image_b".concat(a+1)})},a+1)}))})}),le=(a(244),function(e){return r.a.createPortal(Object(h.jsx)("div",{className:"backdrop",onClick:e.onClose}),document.getElementById("backdrop"))}),de=(a(245),function(e){var t=e.open,a=e.children,n=e.onClose;return t?r.a.createPortal(Object(h.jsxs)("div",{className:"modal",children:[Object(h.jsx)(le,{onClose:n}),Object(h.jsx)("div",{className:"modal__content",children:a}),Object(h.jsx)("div",{className:"modal__footer",children:Object(h.jsx)("button",{onClick:n,children:"close"})})]}),document.querySelector("#modal")):null}),je=(a(246),function(){var e=m().sendRequest,t=I().userId,a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],r=s[1];return Object(n.useEffect)((function(){(function(){var a=Object(u.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e("".concat("https://chat-message-application.herokuapp.com","/messages/user/").concat(t,"/favorite"),"Get");case 2:200===(n=a.sent).status&&r(n.data.message);case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[t]),Object(h.jsx)("div",{className:"star-msg__container",children:c&&c.map((function(e){return Object(h.jsxs)("div",{className:"star-msg__content",children:[Object(h.jsxs)("h4",{className:"star-msg__room",children:["Room: ",e.room]}),Object(h.jsx)("h6",{className:"star-msg__text",children:e.text})]},e.text)}))})}),me=function(){var e=s.a.useState(null),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(l.a)(r,2),o=i[0],u=i[1],d=Object(n.useState)(!1),j=Object(l.a)(d,2),m=j[0],b=j[1],p=I().logout;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de,{open:o,onClose:function(){return u(!1)},children:Object(h.jsx)(ue,{})}),Object(h.jsx)(de,{open:m,onClose:function(){return b(!1)},children:Object(h.jsx)(je,{})}),Object(h.jsx)(Q.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},children:Object(h.jsx)(ee.a,{})}),Object(h.jsxs)(Z.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){c(null)},children:[Object(h.jsx)($.a,{onClick:function(){c(null),u(!0)},name:"background",children:"Background"}),Object(h.jsx)($.a,{onClick:function(){c(null),b(!0)},children:"Star messages"}),Object(h.jsx)($.a,{onClick:function(){return p()},children:"Logout"})]})]})},he=a(387),be=function(){var e=s.a.useState(null),t=Object(l.a)(e,2),a=t[0],n=t[1],c=function(){n(null)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Q.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},children:Object(h.jsx)(he.a,{})}),Object(h.jsxs)(Z.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:c,children:[Object(h.jsx)($.a,{onClick:c,children:"Add Pic"}),Object(h.jsx)($.a,{onClick:c,children:"Add Video"})]})]})},pe=a(388),Oe=(a(248),function(e){var t=e.searchTerm,a=e.setSearchTerm,s=Object(n.useState)(!1),c=Object(l.a)(s,2),r=c[0],i=c[1];return Object(h.jsxs)("div",{className:"search-wrapper",children:[Object(h.jsx)(Q.a,{className:"search-icon","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(){i((function(e){return!e})),a("")},children:Object(h.jsx)(pe.a,{})}),Object(h.jsx)("input",{type:"text",name:"search",id:"text-search",value:t,onChange:function(e){a(e.target.value)},className:"search-input ".concat(r&&"active")})]})}),fe=function(e){var t=e.socket,a=x(),s=a.selectedRoom,c=a.roomUsers,r=I().username,i=R(),o=i.chatUsers,u=i.setChatUsers,d=C(),j=d.saveMessage,m=d.conversationMsgs,b=d.setLastMessage,p=Object(n.useState)({name:r,text:"",room:""}),O=Object(l.a)(p,2),f=O[0],_=O[1],v=Object(n.useState)(m||[]),g=Object(l.a)(v,2),k=g[0],N=g[1],w=Object(n.useState)(""),S=Object(l.a)(w,2),y=S[0],T=S[1],E=Object(n.useState)(!1),F=Object(l.a)(E,2),M=F[0],U=F[1];Object(n.useEffect)((function(){t.emit("userJoin",r)}),[]),Object(n.useEffect)((function(){m&&N(m)}),[m,s]),Object(n.useEffect)((function(){t.on("sendMessage",(function(e){N((function(t){return[].concat(Object(B.a)(t),[e])}))}))}),[]),Object(n.useEffect)((function(){t.on("userList",(function(e){u(e)}))}),[o]);var P=function(e){e.preventDefault();var a=L()().format("HH:mm a"),n={name:f.name,text:f.text,room:s.title,time:a,roomId:s._id};t.emit("sendMessage",n),_({name:f.name,text:"",room:""}),b({roomId:s._id,text:f.text}),j(n)};return Object(h.jsxs)("div",{className:"chat",children:[s&&Object(h.jsxs)("div",{className:"chat__header",children:[Object(h.jsx)(z.a,{}),Object(h.jsxs)("div",{className:"chat__headerInfo",children:[Object(h.jsx)("h3",{children:s&&s.title}),Object(h.jsx)("div",{className:"chat__room-users",children:c&&c.map((function(e){return Object(h.jsx)("p",{className:"chat__room-user",children:e},e)}))})]}),Object(h.jsxs)("div",{className:"chat__headerRight",children:[Object(h.jsx)(Oe,{searchTerm:y,setSearchTerm:T}),Object(h.jsx)(be,{}),Object(h.jsx)(me,{})]})]}),s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(K,{search:y,room:s,messageList:k,send:r}),Object(h.jsxs)("div",{className:"chat__footer",children:[Object(h.jsx)(W.a,{onClick:function(){return U((function(e){return!e}))},style:{cursor:"pointer"}}),M&&Object(h.jsx)(A.a,{onEmojiClick:function(e,t){_(Object(q.a)(Object(q.a)({},f),{},{text:f.text+t.emoji}))},pickerStyle:{position:"absolute",bottom:"55px",left:0}}),Object(h.jsxs)("form",{onSubmit:P,children:[Object(h.jsx)("input",{type:"text",placeholder:"Type a message",onChange:function(e){_(Object(q.a)(Object(q.a)({},f),{},{text:e.target.value}))},value:f.text}),Object(h.jsx)("button",{type:"submit",onSubmit:P,children:Object(h.jsx)(Q.a,{children:Object(h.jsx)(X.a,{})})})]})]})]})]})},xe=a(167),_e=a.n(xe),ve=(a(249),function(e){var t=e.room,a=R().socket,s=x(),c=s.selectedRoom,r=s.setSelectedRoom,i=s.setRooms,d=C(),b=d.getRoomMessages,p=d.lastMessage,O=I().userId,f=Object(n.useState)(),_=Object(l.a)(f,2),v=_[0],g=_[1],k=Object(n.useState)(""),N=Object(l.a)(k,2),w=N[0],S=N[1],y=m().sendRequest,T=Object(n.useCallback)((function(){a&&(r(t),a.emit("roomEntered",{oldRoom:w,newRoom:t}))}),[w,t,r,a]);Object(n.useEffect)((function(){S(c)}),[c]),Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j()({url:"".concat("https://chat-message-application.herokuapp.com","/messages/room/").concat(t),method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 3:a=e.sent,n=a.data.message,s=n.map((function(e){return e.text})),g(s[s.length-1]),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}})()(t._id)}),[t._id]),Object(n.useEffect)((function(){p&&p.roomId===t._id&&g(p.text)}),[p,t._id]),Object(n.useEffect)((function(){null!==c&&b(c._id)}),[b,c]);var E=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("".concat("https://chat-message-application.herokuapp.com","/rooms/").concat(t,"/delete"),"DELETE",{admin:O});case 2:a=e.sent,n=a.data.userRooms,200===a.status&&i(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"sidebarChat",onClick:T,children:[Object(h.jsx)(z.a,{}),Object(h.jsxs)("div",{className:"sidebarChat__info",children:[Object(h.jsx)("h2",{children:t.title}),Object(h.jsx)("p",{children:v})]}),c&&c.admin===O?Object(h.jsx)("div",{className:"sidebarChat__delete",onClick:function(){return E(c._id)},children:Object(h.jsx)(_e.a,{})}):null]})}),ge=function(e){var t=e.rooms;return Object(h.jsx)(s.a.Fragment,{children:t&&t.map((function(e){return Object(h.jsx)(s.a.Fragment,{children:Object(h.jsx)(ve,{room:e})},e._id)}))})},ke=a(392),Ne=a(393),Ce=a(177),we=a.n(Ce),Se=a(178),ye=a.n(Se),Te=a(391),Re=a(44),Ee=a(20),Fe=(a(348),function(e){var t=e.redirect,a=m(),n=a.error,s=a.isLoading,c=a.sendRequest,r=x().loadRooms,i=I(),l=i.token,d=i.userId,j=Object(Re.a)({initialValues:{name:""},validationSchema:Ee.a({name:Ee.b().min(2,"Must be 2 characters or more").required("Required")}),onSubmit:function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("".concat("https://chat-message-application.herokuapp.com","/rooms/create"),"POST",{title:a.name,created:L()(new Date).utc().format("DD/MM/YYYY"),admin:d},{"Content-Type":"application/json",Authorization:"Bearer "+l});case 3:"OK"===e.sent.statusText&&(r(d),t("chat")),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()});return console.log(n),Object(h.jsxs)("div",{className:"create-room__container",children:[Object(h.jsx)("h3",{className:"create-room__title",children:"Create room"}),n&&Object(h.jsx)("div",{children:n}),s&&Object(h.jsx)("div",{children:"Loading...."}),Object(h.jsxs)("form",{onSubmit:j.handleSubmit,className:"create-room__form",children:[Object(h.jsx)("label",{htmlFor:"name",className:"create-room__label create-room__label__name ".concat(!j.errors.name&&j.touched.name&&"create-room__success"),children:"Room name"}),Object(h.jsx)("input",{className:"create-room__input create-room__name",id:"room-name",name:"name",type:"text",onChange:j.handleChange,onBlur:j.handleBlur,value:j.values.name,autoComplete:"new-password"}),Object(h.jsx)("div",{className:"create-room__error__wrapper",children:j.touched.name&&j.errors.name?Object(h.jsx)("span",{className:"create-room__error__msg",children:j.errors.name}):null}),Object(h.jsx)("button",{type:"submit",className:"create-room__btn",children:"Create"})]})]})}),Ie=(a(349),a(155),function(e){var t=e.user,a=e.redirect,s=m().sendRequest,c=I(),r=c.username,i=c.userId,l=p(),d=l.setUserFriends,j=l.userFriends,b=t.name.slice(0,2).toUpperCase(),O=Object(n.useCallback)(Object(u.a)(o.a.mark((function e(){var n,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:r,userId:i},e.prev=1,e.next=4,s("https://chat-message-application.herokuapp.com/users/add-friend","PATCH",{friend:t,admin:n},{"Content-Type":"application/json"});case 4:c=e.sent,u=c.data,d([].concat(Object(B.a)(j),[u.user])),"OK"===c.statusText&&a("rooms"),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])}))),[]);return Object(h.jsxs)("div",{className:"friends_view",children:[Object(h.jsx)(z.a,{children:b}),Object(h.jsxs)("div",{className:"friends_view__info",children:[Object(h.jsx)("h2",{children:t.name}),Object(h.jsx)("p",{children:t.email})]}),Object(h.jsx)("div",{className:"friends_view__footer",children:Object(h.jsx)("button",{className:"friends__btn_add",onClick:O,children:"Add"})})]})}),Me=function(e){var t=e.redirect,a=m(),s=a.error,c=a.isLoading,r=a.sendRequest,i=Object(n.useState)(null),d=Object(l.a)(i,2),j=d[0],b=d[1],p=Object(Re.a)({initialValues:{email:""},validationSchema:Ee.a({email:Ee.b().email("invalid email address").required("Required")}),onSubmit:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("".concat("https://chat-message-application.herokuapp.com","/users/find-friend").concat("?email="+t.email),"GET");case 3:a=e.sent,n=a.data,b(n.user),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()});return Object(h.jsxs)("div",{className:"friends__container",children:[Object(h.jsx)("h3",{className:"friends__title",children:"Add Friends"}),s&&Object(h.jsx)("div",{children:s}),c&&Object(h.jsx)("div",{children:"Loading...."}),Object(h.jsxs)("form",{onSubmit:p.handleSubmit,className:"friends__form",children:[Object(h.jsx)("label",{htmlFor:"email",className:"friends__label friends__label__name ".concat(!p.errors.email&&p.touched.email&&"friends__success"),children:"User email"}),Object(h.jsx)("input",{className:"friends__input friends__name",id:"email",name:"email",type:"email",onChange:p.handleChange,onBlur:p.handleBlur,value:p.values.email}),Object(h.jsx)("div",{className:"friends__error__wrapper",children:p.touched.email&&p.errors.email?Object(h.jsx)("span",{className:"friends__error__msg",children:p.errors.email}):null}),Object(h.jsx)("button",{type:"submit",className:"friends__btn",children:"Find"})]}),Object(h.jsx)("div",{className:"friends-view__wrapper",children:j&&Object(h.jsx)(Ie,{user:j,redirect:t})})]})},qe=a(175),Be=a.n(qe),Ue=a(176),Le=a.n(Ue),Pe=a(174),Ae=a.n(Pe),He=(a(350),a(173)),Je=a.n(He),Ve=(a(351),function(e){var t=e.friend,a=I().username,s=R().socket,c=Object(n.useState)([]),r=Object(l.a)(c,2),i=r[0],o=r[1],u=Object(n.useState)({name:a,text:""}),d=Object(l.a)(u,2),j=d[0],m=d[1];console.log(t);var b=function(e){e.preventDefault();var a=L()().format("HH:mm a"),n={name:j.name,text:j.text,time:a,to:t,private:!0};s.emit("sendMessage",n),m({name:j.name,text:""})};return Object(n.useEffect)((function(){s.on("sendMessage",(function(e){o((function(t){return[].concat(Object(B.a)(t),[e])}))}))}),[]),Object(h.jsxs)("div",{className:"private-chat__container",children:[Object(h.jsxs)("div",{className:"private_chat__note-wrapper",children:[Object(h.jsx)(Je.a,{}),Object(h.jsxs)("p",{className:"private-chat__note",children:["You are in private chat, ",Object(h.jsx)("br",{}),"the messages will delete after closing the chat"]})]}),Object(h.jsx)("div",{className:"private-chat__messages",children:i&&i.map((function(e){return Object(h.jsxs)("div",{className:"private-chat__message_wrapper ".concat(t===e.name?"receiver":null),children:[Object(h.jsx)("h3",{className:"private-chat__name",children:e.name}),Object(h.jsx)("p",{className:"private-chat__body",children:e.text})]})}))}),Object(h.jsx)("div",{className:"private-chat__footer",children:Object(h.jsxs)("form",{onSubmit:b,children:[Object(h.jsx)("input",{type:"text",placeholder:"Type a message",onChange:function(e){m(Object(q.a)(Object(q.a)({},j),{},{text:e.target.value}))},value:j.text}),Object(h.jsx)("button",{type:"submit",onSubmit:b,children:Object(h.jsx)(Q.a,{children:Object(h.jsx)(X.a,{})})})]})})]})}),De=function(){var e=s.a.useState(null),t=Object(l.a)(e,2),a=t[0],c=t[1],r=p(),i=r.setUserFriends,d=r.userFriends,j=r.loadUserFriends,b=I().userId,O=x().rooms,f=m().sendRequest,_=R(),v=_.chatUsers,g=_.socket,k=Object(n.useState)(!1),N=Object(l.a)(k,2),C=(N[0],N[1]),w=Object(n.useState)(!1),S=Object(l.a)(w,2),y=S[0],T=S[1],E=Object(n.useState)(""),F=Object(l.a)(E,2),M=F[0],q=F[1];Object(n.useEffect)((function(){j(b)}),[j,b]);var B=function(){var e=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat("https://chat-message-application.herokuapp.com","/rooms/").concat(t,"/addUser"),"patch",{email:a,admin:b},{"Content-Type":"application/json"});case 3:"OK"===e.sent.statusText&&c(null),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),U=function(){c(null)},L=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat("https://chat-message-application.herokuapp.com","/users/remove-friend"),"patch",{admin:b,friendEmail:t},{"Content-Type":"application/json"});case 3:a=e.sent,n=a.data.updateUser,"OK"===a.statusText&&(i(n.friends),C((function(e){return!e}))),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"friend-list__container",children:[Object(h.jsx)(de,{onClose:function(){return T(!1)},open:y,children:Object(h.jsx)(Ve,{friend:M})}),Object(h.jsx)("h2",{className:"friend-list__title",children:"My Friends"}),d&&d.map((function(e,t){return Object(h.jsxs)("div",{className:"friend-list_view",children:[Object(h.jsxs)("div",{className:"avatar",children:[Object(h.jsx)(z.a,{children:"PIC"}),v&&v.some((function(t){return e.name.toLowerCase()===t.toLowerCase()}))?Object(h.jsx)("div",{className:"friend-list_online"}):null]}),Object(h.jsxs)("div",{className:"friend-list_view__info",children:[Object(h.jsx)("h2",{className:"friend-list_name",children:e.name}),Object(h.jsxs)("span",{"aria-controls":"simple-menu","aria-haspopup":"true",className:"friend-list-option",children:[Object(h.jsx)(Ae.a,{className:"group_icon",onClick:function(t){return function(e,t){q(t.email),c(e.currentTarget)}(t,e)}}),Object(h.jsx)(Be.a,{className:"delete_icon",onClick:function(){return L(e.email)}}),Object(h.jsx)(Le.a,{className:"msg_icon",onClick:function(){return function(e){g&&(g.emit("privateMessage",e),q(e),T(!0))}(e.name)}})]})]}),Object(h.jsx)(Z.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:U,children:O&&O.map((function(e){return Object(h.jsx)($.a,{onClick:function(){return B(e._id,M)},children:e.title},e._id)}))})]},t)}))]})},Ge=Object(Te.a)((function(e){return{small:{width:e.spacing(3),height:e.spacing(3)},large:{width:e.spacing(6),height:e.spacing(6)}}})),Ye=function(e){e.socket;var t,a=e.username,c=Object(n.useState)(""),r=Object(l.a)(c,2),i=r[0],o=r[1],u=s.a.useState(null),d=Object(l.a)(u,2),j=d[0],m=d[1],b=x().rooms,p=Ge(),O=a.slice(0,2).toUpperCase();switch(i){case"create-room":t=Object(h.jsx)(Fe,{redirect:o});break;case"rooms":t=Object(h.jsx)(ge,{rooms:b});break;case"add-friends":t=Object(h.jsx)(Me,{redirect:o});break;case"friends-list":t=Object(h.jsx)(De,{redirect:o});break;default:t=Object(h.jsx)(ge,{rooms:b})}var f=function(){m(null)};return Object(h.jsxs)("div",{className:"sidebar",children:[Object(h.jsxs)("div",{className:"sidebar__header",children:[Object(h.jsx)(z.a,{className:p.large,children:O}),Object(h.jsxs)("div",{className:"sidebar__headerRight",children:[Object(h.jsx)(Q.a,{onClick:function(){return o("friends-list")},children:Object(h.jsx)(ke.a,{fontSize:"small"})}),Object(h.jsx)(Q.a,{onClick:function(){return o("rooms")},children:Object(h.jsx)(we.a,{fontSize:"small"})}),Object(h.jsx)(Q.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},children:Object(h.jsx)(Ne.a,{})}),Object(h.jsxs)(Z.a,{id:"simple-menu",anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:f,children:[Object(h.jsx)($.a,{onClick:f,children:Object(h.jsx)("p",{onClick:function(){return o("create-room")},children:"Create Room"})}),Object(h.jsx)($.a,{onClick:f,children:Object(h.jsx)("p",{onClick:function(){return o("add-friends")},children:"Add Friend"})})]})]})]}),Object(h.jsx)("div",{className:"sidebar__search",children:Object(h.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(h.jsx)(ye.a,{}),Object(h.jsx)("input",{type:"text",placeholder:"Search or start new chat"})]})}),Object(h.jsx)("div",{className:"sidebar__chat",children:t})]})},Ke=function(e){var t=e.user,a=p().loadUsers,c=x().loadRooms,r=g().selectTheme,i=R().socket,o=function(e,t){var a=localStorage.getItem(e),s=a?JSON.parse(a):t,c=Object(n.useState)(s),r=Object(l.a)(c,2),i=r[0],o=r[1];return Object(n.useEffect)((function(){localStorage.setItem(e,JSON.stringify(i))}),[e,i]),{storageValue:i,setValue:o}}("user-Theme","").setValue,u=I().userId;return Object(n.useEffect)((function(){o(r||"")}),[r]),Object(n.useEffect)((function(){a(),c(u)}),[u]),Object(h.jsx)(s.a.Fragment,{children:i&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ye,{socket:i,username:t}),Object(h.jsx)(fe,{socket:i,username:t})]})})},ze=a(11),Qe=a(59),We=(a(156),function(){var e=m(),t=e.error,a=e.isLoading,n=e.sendRequest,s=I().login,c=Object(Re.a)({initialValues:{email:"",password:""},validationSchema:Ee.a({password:Ee.b().min(6,"Must be 6 characters or more").required("Required"),email:Ee.b().email("invalid email address").required("Required")}),onSubmit:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://chat-message-application.herokuapp.com","/users/login"),"POST",{email:t.email,password:t.password},{"Content-Type":"application/json"});case 3:a=e.sent,c=a.data,s(c.user._id,c.token,c.user.name),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()});return Object(h.jsxs)("div",{className:"auth__container",children:[Object(h.jsx)("h3",{className:"aut__title",children:"Login"}),t&&Object(h.jsx)("div",{children:t}),a&&Object(h.jsx)("div",{children:"Loading...."}),Object(h.jsxs)("form",{onSubmit:c.handleSubmit,className:"auth__form",children:[Object(h.jsxs)("label",{htmlFor:"email",className:"auth__label auth__label__email ".concat(!c.errors.email&&c.touched.email&&"auth__success"),children:["Email",c.touched.email&&c.errors.email?Object(h.jsx)("span",{className:"auth__error__msg",children:c.errors.email}):null]}),Object(h.jsx)("input",{className:"auth__input auth__email",id:"email",name:"email",type:"email",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.email,autoComplete:"new-password"}),Object(h.jsxs)("label",{htmlFor:"password",className:"auth__label auth__label__password ".concat(!c.errors.password&&c.touched.password&&"auth__success"),children:["Password",c.touched.password&&c.errors.password?Object(h.jsx)("span",{className:"auth__error__msg",children:c.errors.password}):null]}),Object(h.jsx)("input",{className:"auth__input aut__password",id:"password",name:"password",type:"password",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.password}),Object(h.jsx)("button",{type:"submit",className:"auth__btn",children:"Submit"}),Object(h.jsx)("div",{className:"auth__link",children:Object(h.jsxs)("p",{children:["Dont have account? ",Object(h.jsx)(Qe.b,{to:"/signup",children:"Sign up"})]})})]})]})}),Xe=function(){var e=m().sendRequest,t=I().login,a=Object(Re.a)({initialValues:{name:"",email:"",password:""},validationSchema:Ee.a({name:Ee.b().max(15,"Must be 15 characters or less").required("Required"),email:Ee.b().email("invalid email address").required("Required"),password:Ee.b().min(6,"Must be at least 6 characters").required("Required")}),onSubmit:function(){var a=Object(u.a)(o.a.mark((function a(n){var s,c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(n),a.prev=1,a.next=4,e("".concat("https://chat-message-application.herokuapp.com","/users/signup"),"POST",{name:n.name,email:n.email,password:n.password},{"Content-Type":"application/json"});case 4:s=a.sent,c=s.data,t(c.user._id,c.token,c.user.name),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()});return Object(h.jsxs)("div",{className:"auth__container",children:[Object(h.jsx)("h3",{className:"aut__title",children:"Sign up"}),Object(h.jsxs)("form",{onSubmit:a.handleSubmit,className:"auth__form",children:[Object(h.jsxs)("label",{htmlFor:"name",className:"auth__label auth__label__name ".concat(!a.errors.name&&a.touched.name&&"auth__success"),children:["Name",a.touched.name&&a.errors.name?Object(h.jsx)("span",{className:"auth__error__msg",children:a.errors.name}):null]}),Object(h.jsx)("input",{className:"auth__input auth__name",autoComplete:"name",id:"name",name:"name",type:"text",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.name}),Object(h.jsxs)("label",{htmlFor:"email",className:"auth__label auth__label__email ".concat(!a.errors.email&&a.touched.email&&"auth__success"),children:["Email",a.touched.email&&a.errors.email?Object(h.jsx)("span",{className:"auth__error__msg",children:a.errors.email}):null]}),Object(h.jsx)("input",{className:"auth__input auth__email",id:"email",name:"email",type:"email",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.email,autoComplete:"new-password"}),Object(h.jsxs)("label",{htmlFor:"password",className:"auth__label auth__label__password ".concat(!a.errors.password&&a.touched.password&&"auth__success"),children:["Password",a.touched.password&&a.errors.password?Object(h.jsx)("span",{className:"auth__error__msg",children:a.errors.password}):null]}),Object(h.jsx)("input",{className:"auth__input aut__password",id:"password",name:"password",type:"password",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.password}),Object(h.jsx)("button",{type:"submit",className:"auth__btn",children:"Submit"}),Object(h.jsx)("div",{className:"auth__link",children:Object(h.jsxs)("p",{children:["You have account? ",Object(h.jsx)(Qe.b,{to:"/login",children:"Login"})," "]})})]})]})},Ze=function(){var e=Object(h.jsxs)(ze.d,{children:[Object(h.jsx)(ze.b,{exact:!0,path:"/signup",children:Object(h.jsx)(Xe,{})}),Object(h.jsx)(ze.b,{exact:!0,path:"/",children:Object(h.jsx)(We,{})}),Object(h.jsx)(ze.a,{to:"/"})]});return Object(h.jsx)(Qe.a,{children:e})};a(355);var $e=function(){var e=I(),t=e.token,a=e.username,n=e.userId;return t&&a?Object(h.jsx)("div",{className:"app",children:Object(h.jsx)("div",{className:"app__body",children:Object(h.jsx)(O,{children:Object(h.jsx)(E,{id:n,children:Object(h.jsx)(_,{children:Object(h.jsx)(w,{children:Object(h.jsx)(k,{children:Object(h.jsx)(Ke,{user:a})})})})})})})}):Object(h.jsx)(Ze,{})};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(M,{children:Object(h.jsx)($e,{})})}),document.getElementById("root"))},97:function(e,t,a){}},[[356,1,2]]]);
//# sourceMappingURL=main.45b465be.chunk.js.map